<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>ç¤¾å€å®¢æœç³»çµ± Â· é¦–é </title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#0a443f" />
  <link rel="manifest" href="manifest.webmanifest" />
  <link rel="icon" href="icon-192.png" />
  <link rel="apple-touch-icon" href="icon-192.png" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700;900&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:FILL@0..1" rel="stylesheet" />
  <script type="module">import 'https://esm.run/@material/web/all.js';</script>

  <style>
    :root{ --container-w: min(1140px, calc(100vw - 24px)); }
    html,body{height:100%}
    body{margin:0;font-family: Roboto, system-ui, -apple-system, "Segoe UI", Arial;}
    md-top-app-bar{ position: sticky; top: 0; z-index: 110; }
    .app-shell{display:flex;flex-direction:column;min-height:100%}
    .container{width:var(--container-w);margin-inline:auto}
    .grid{display:grid;gap:18px;grid-template-columns:repeat(auto-fill,minmax(280px,1fr))}
    .tile{position:relative;border-radius:18px;overflow:hidden;min-height:200px;color:#fff;background-size:cover;background-position:center;cursor:pointer;box-shadow:0 8px 24px rgba(0,0,0,.12);transition:transform .15s, box-shadow .15s, filter .15s}
    .tile:hover{ transform:translateY(-2px); box-shadow:0 14px 36px rgba(0,0,0,.18); filter:saturate(1.05); }
    .tile::before{content:"";position:absolute;inset:0;background:linear-gradient(180deg, rgba(0,0,0,.08), rgba(0,0,0,.28))}
    .tile > .inner{position:relative;padding:22px;text-shadow:0 1px 2px rgba(0,0,0,.45)}
    .badge{position:absolute;top:10px;right:10px;background:#FFD54F;color:#2b2b2b;border-radius:999px;padding:6px 10px;font-weight:700;box-shadow:0 8px 24px rgba(0,0,0,.14)}
    .kicker{opacity:.95;font-weight:600;line-height:1.9}
    .title{font-size:22px;font-weight:900;letter-spacing:.3px;margin:4px 0 8px}
    .items{line-height:1.9;font-weight:600;opacity:.95}

    /* äºŒå±¤ç·Šæ€¥åˆ—ï¼ˆç”¨åŒä¸€å€‹å¯¬åº¦å®¹å™¨ï¼Œèˆ‡å¡ç‰‡å®Œå…¨å·¦å°é½Šï¼‰ */
    .emg-row{ border-bottom:1px solid #eee; background:transparent; }
    .emg-keys{
      width:var(--container-w);
      margin-inline:auto;
      display:flex; gap:8px; justify-content:flex-start;
      padding:8px 0;         /* ç„¡å·¦å³ paddingï¼Œèˆ‡ .container å·¦é‚Šç·£é½Š */
    }
    .emg-chip{ white-space:nowrap }
    .muted{opacity:.66}
  </style>
</head>
<body class="app-shell">
<md-top-app-bar>
  <div slot="navigationIcon" style="padding-left:6px">
    <span class="material-symbols-outlined">apartment</span>
  </div>
  <div slot="headline" style="font-weight:900;letter-spacing:.4px">ç¤¾å€å®¢æœç³»çµ±</div>

  <!-- actionItemsï¼šå¸³è™Ÿ / å¾Œå° â†’ ç·Šæ€¥å››éµ -->
  <div slot="actionItems" style="display:flex; gap:8px; align-items:center;">

    <!-- ç®¡ç†å¾Œå° -->
    <md-icon-button aria-label="ç®¡ç†å¾Œå°" title="ç®¡ç†å¾Œå°" onclick="return goBackendFromHome(event)">
      <span class="material-symbols-outlined">admin_panel_settings</span>
    </md-icon-button>

    <!-- å¸³è™Ÿé¸å–® -->
    <md-menu id="userMenu" anchor="userBtn">
      <md-menu-item disabled>
        <div slot="headline" id="authName">è¨ªå®¢</div>
        <div slot="supporting-text" id="authMail" class="muted">æœªç™»å…¥</div>
      </md-menu-item>
      <md-divider></md-divider>
      <md-menu-item id="menuLogin" onclick="gotoLogin()">
        <span slot="start" class="material-symbols-outlined">login</span>
        <div slot="headline">ç™»å…¥ï¼ˆé¸æ“‡èº«åˆ†ï¼‰</div>
      </md-menu-item>
      <md-menu-item id="menuLogout" onclick="logout()" style="display:none">
        <span slot="start" class="material-symbols-outlined">logout</span>
        <div slot="headline">ç™»å‡º</div>
      </md-menu-item>
    </md-menu>
    <md-icon-button id="userBtn" aria-label="å¸³è™Ÿ" title="å¸³è™Ÿ" onclick="userMenu.show()">
      <span class="material-symbols-outlined">account_circle</span>
    </md-icon-button>

    <!-- ç·Šæ€¥å››éµï¼ˆåœ¨å¾Œå°èˆ‡å¸³è™Ÿå¾Œé¢ï¼‰ -->
    <md-assist-chip class="emg-chip" label="æ•‘è­·è»Š(119)" onclick="EmergencyActions.call119()">
      <span class="material-symbols-outlined" slot="icon">ambulance</span>
    </md-assist-chip>
    <md-assist-chip class="emg-chip" label="AED" onclick="EmergencyActions.aed()">
      <span class="material-symbols-outlined" slot="icon">heart_plus</span>
    </md-assist-chip>
    <md-assist-chip class="emg-chip" label="å ±è­¦(110)" onclick="EmergencyActions.call110()">
      <span class="material-symbols-outlined" slot="icon">siren</span>
    </md-assist-chip>
    <md-assist-chip class="emg-chip" label="è·Œå€’(æ¨¡æ“¬)" onclick="EmergencyActions.simFall()"></md-assist-chip>
  </div>
</md-top-app-bar>



  <main class="container" style="padding:22px 0 28px">
    <div style="margin:8px 0 18px">
      <h2 style="font-weight:900;letter-spacing:.3px;margin:0">å¿«é€Ÿå…¥å£</h2>
      <div class="muted" style="margin-top:6px">ä¸Šæ–¹æä¾›ã€Œç·Šæ€¥å››éµã€ã€‚å…¶ä»–åŠŸèƒ½è«‹ç”±ä¸‹æ–¹å¡ç‰‡é€²å…¥ã€‚</div>
    </div>

    <section class="grid">
      <!-- åŠŸèƒ½å¡ç‰‡ï¼ˆåŸæ¨£ä¿ç•™ï¼‰ -->
      <a class="tile" onclick="return gotoProtected(event)" href="app.html#announcement" style="background-image:url('https://images.unsplash.com/photo-1581090463728-28b1b3a4f50b?q=80&w=1400&auto=format&fit=crop')">
        <div class="badge">å…¬å‘Š / æŠ•ç¥¨</div>
        <div class="inner"><div class="kicker">ğŸ—³ï¸ å…¬å‘Š / æŠ•ç¥¨</div><div class="title">ç¤¾å€å…¬å‘Šèˆ‡æŠ•ç¥¨</div><div class="items">ç€è¦½ Â· æŠ•ç¥¨</div></div>
      </a>
      <a class="tile" onclick="return gotoProtected(event)" href="app.html#maintenance" style="background-image:url('https://images.unsplash.com/photo-1581092795360-fd1ca04f0952?q=80&w=1400&auto=format&fit=crop')">
        <div class="badge">ç¶­ä¿® / å®¢æœ</div>
        <div class="inner"><div class="kicker">ğŸ› ï¸ ç¶­ä¿® / å®¢æœ</div><div class="title">è¨­å‚™ç¶­è­·èˆ‡å®¢æœå–®</div><div class="items">ç€è¦½ Â· ç‹€æ…‹æ›´æ–°</div></div>
      </a>
      <a class="tile" onclick="return gotoProtected(event)" href="app.html#finance" style="background-image:url('https://images.unsplash.com/photo-1554224155-8d04cb21cd6c?q=80&w=1400&auto=format&fit=crop')">
        <div class="badge">å¸³å‹™ / æ”¶è²»</div>
        <div class="inner"><div class="kicker">ğŸ’µ å¸³å‹™ / æ”¶è²»</div><div class="title">ç®¡ç†è²»èˆ‡æ”¶æ”¯</div><div class="items">ç€è¦½ Â· è¨­ç‚ºå·²ç¹³/æœªç¹³</div></div>
      </a>
      <a class="tile" onclick="return gotoProtected(event)" href="app.html#resident" style="background-image:url('https://images.unsplash.com/photo-1582719478250-c89cae4dc85b?q=80&w=1400&auto=format&fit=crop')">
        <div class="badge">ä½æˆ¶ / äººå“¡</div>
        <div class="inner"><div class="kicker">ğŸ·ï¸ ä½æˆ¶ / äººå“¡</div><div class="title">ä½æˆ¶èˆ‡ç¤¾å€äººå“¡</div><div class="items">ç€è¦½ Â· åˆªé™¤</div></div>
      </a>
      <a class="tile" onclick="return gotoProtected(event)" href="app.html#visitor" style="background-image:url('https://images.unsplash.com/photo-1529078146-58e3c81d4ebc?q=80&w=1400&auto=format&fit=crop')">
        <div class="badge">è¨ªå®¢ / åŒ…è£¹</div>
        <div class="inner"><div class="kicker">ğŸ“¦ è¨ªå®¢ / åŒ…è£¹</div><div class="title">è¨ªå®¢èˆ‡åŒ…è£¹</div><div class="items">ç€è¦½ Â· ç°½å‡º</div></div>
      </a>
      <a class="tile" onclick="return gotoProtected(event)" href="app.html#meeting" style="background-image:url('https://images.unsplash.com/photo-1511578314322-379afb476865?q=80&w=1400&auto=format&fit=crop')">
        <div class="badge">æœƒè­° / æ´»å‹•</div>
        <div class="inner"><div class="kicker">ğŸ“ æœƒè­° / æ´»å‹•</div><div class="title">è­°ç¨‹èˆ‡æ´»å‹•</div><div class="items">ç€è¦½ Â· åˆªé™¤</div></div>
      </a>
      <a class="tile" onclick="return gotoProtected(event)" href="app.html#emergency" style="background-image:url('https://images.unsplash.com/photo-1516574187841-cb9cc2ca948b?q=80&w=1400&auto=format&fit=crop')">
        <div class="badge">ç·Šæ€¥</div>
        <div class="inner"><div class="kicker">ğŸš¨ ç·Šæ€¥</div><div class="title">ç·Šæ€¥æŒ‰éˆ•</div><div class="items">æ•‘è­·è»Š Â· AED Â· å ±è­¦</div></div>
      </a>
    </section>
  </main>

  <!-- å›ºå®šå³ä¸‹ï¼šå®‰è£ Appï¼ˆæœƒè‡ªå‹•æ”¾åœ¨ AI å®¢æœã€Œä¸‹æ–¹ã€ï¼‰ -->
  <md-fab id="installCta" label="å®‰è£ App" variant="secondary" style="display:none">
    <span class="material-symbols-outlined" slot="icon">download</span>
  </md-fab>

  <script src="index.js"></script>
  <script>
    initPage('front');

    function goBackendFromHome(ev){
      if (!isLoggedIn()) return gotoProtected(ev);
      if (!hasRole('committee')) {
        ev.preventDefault();
        alert('ç®¡ç†å¾Œå°åƒ…é™ã€Œç®¡å§”æœƒã€ä½¿ç”¨ã€‚');
        return false;
      }
      location.href = 'backend.html';
      return true;
    }

    // installCta é¡¯ç¤ºæ™‚ï¼ŒAI å®¢æœæœƒè‡ªå‹•ä¸Šç§»ï¼ˆé‚è¼¯åœ¨ index.jsï¼‰
    const setChatLift = (visible) => {
      document.body.classList.toggle('has-install-fab', !!visible);
    };
    (function(){
      const btn = document.getElementById('installCta');
      if (btn) setChatLift(getComputedStyle(btn).display !== 'none');
    })();
    window.addEventListener('installCta-visibility', (e)=> setChatLift(e.detail?.visible));
  </script>
</body>
</html>
